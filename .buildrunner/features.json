{
  "project": "marba-mirror",
  "version": "1.0.0",
  "status": "in_progress",
  "last_updated": "2025-11-11T14:45:00Z",
  "description": "MARBA Mirror - MIRROR Framework-based marketing intelligence platform with AI-powered insights, real-time opportunities, and automated content generation. Inspired by SOSTAC¬Æ (PR Smith trademark).",
  "repository": "~/Projects/MARBA",
  "features": [
    {
      "id": "asset-analysis-engine",
      "name": "Asset Analysis Engine",
      "status": "complete",
      "version": "2.0.0",
      "priority": "critical",
      "description": "Comprehensive website and social media analysis with AI-powered extraction of brand assets, colors, fonts, and content patterns. Respects robots.txt and implements rate limiting.",
      "components": [
        "AssetAnalysis.tsx",
        "AssetAnalysis/ai-analysis.ts",
        "AssetAnalysis/competitive-analysis.ts",
        "AssetAnalysis/helpers.ts",
        "AssetAnalysis/ScanControls.tsx"
      ],
      "apis": [
        "OpenRouter (Claude Haiku/Sonnet)",
        "Website crawling API",
        "Social media profile scraping",
        "Color palette extraction"
      ],
      "database_tables": [
        "competitor_candidates",
        "competitive_analysis_runs"
      ],
      "lineOfCode": 1966,
      "capabilities": [
        "Website crawling with robots.txt compliance",
        "Social media profile analysis",
        "Visual asset extraction (colors, fonts, logos)",
        "Content pattern detection",
        "Tone and archetype analysis",
        "Industry classification"
      ]
    },
    {
      "id": "brand-mirror-analysis",
      "name": "Brand Mirror (7-Tab Analysis System)",
      "status": "complete",
      "version": "2.3.0",
      "priority": "critical",
      "description": "Comprehensive brand analysis presented through 7 interconnected tabs, each providing deep insights into different aspects of brand identity with AI-powered scoring and evidence backing.",
      "components": [
        "BrandMirror.tsx",
        "AssetAnalysis/BrandMirrorTabs/BrandMirrorTabs.tsx",
        "AssetAnalysis/BrandMirrorTabs/BrandMirrorCard.tsx",
        "AssetAnalysis/BrandMirrorTabs/ToneCalibrationPanel.tsx"
      ],
      "apis": [
        "Claude AI for analysis",
        "OpenRouter API"
      ],
      "database_tables": [
        "competitor_profiles",
        "strategic_insights"
      ],
      "lineOfCode": 4110,
      "tabs": [
        {
          "name": "Overview",
          "purpose": "Brand health score and quick insights",
          "metrics": ["Health Score (0-100)", "Golden Circle Summary", "Archetype Overview"]
        },
        {
          "name": "Voice & Archetype",
          "purpose": "12 brand archetypes with confidence scoring",
          "metrics": ["Primary Archetype", "Secondary Archetype", "Channel-specific voice", "Voice drift tracking"]
        },
        {
          "name": "Purpose (Golden Circle)",
          "purpose": "Deep purpose and positioning analysis",
          "metrics": ["Why (Purpose & Mission)", "How (Unique Process)", "What (Products & Services)"]
        },
        {
          "name": "Audience & Industry",
          "purpose": "Market and demographic analysis",
          "metrics": ["Demographics", "Psychographics", "Industry Classification", "Market Positioning"]
        },
        {
          "name": "Competitors",
          "purpose": "Competitive intelligence and differentiation",
          "metrics": ["Auto-competitor detection", "4-phase competitive analysis", "Market saturation", "Differentiation opportunities"]
        },
        {
          "name": "Messaging",
          "purpose": "Narrative and positioning strategy",
          "metrics": ["Narrative arc mapping", "Positioning statement", "Proof patterns", "Messaging pillars"]
        },
        {
          "name": "Visual & Tone",
          "purpose": "Visual identity and communication tone",
          "metrics": ["Color palette extraction", "Typography analysis", "5D tone calibration", "Accessibility checks"]
        }
      ]
    },
    {
      "id": "reflection-goals-system",
      "name": "Reflection & Goals System (V2.3)",
      "status": "complete",
      "version": "2.3.0",
      "priority": "critical",
      "description": "Interactive guided reflection mode with AI-powered suggestions and goal-setting. Enables users to transform their brand strategy through structured reflection and archetype transformation planning.",
      "components": [
        "BrandReflection/ReflectionModeToggle.tsx",
        "BrandReflection/ArchetypeTransformationPanel.tsx",
        "BrandReflection/GoalsDashboard.tsx"
      ],
      "apis": [
        "OpenRouter (Claude Haiku for suggestions)",
        "Goal generation API"
      ],
      "database_tables": [
        "brand_goals",
        "goal_reflections",
        "archetype_transformations"
      ],
      "lineOfCode": 811,
      "capabilities": [
        "Tab-by-tab guided reflection",
        "Teaching content for brand frameworks",
        "AI-powered goal suggestions",
        "Progress tracking (X/7 tabs)",
        "5-step archetype transformation workflow",
        "Visual archetype selector (12 options)",
        "Timeline planning (1-3, 3-6, 6-12 months)",
        "Automatic content instruction generation",
        "Goals Dashboard (8th tab)",
        "Milestone and action item tracking",
        "Export capabilities (PDF, team sharing)"
      ]
    },
    {
      "id": "competitive-intelligence",
      "name": "Competitive Intelligence Engine (4-Phase)",
      "status": "complete",
      "version": "1.0.0",
      "priority": "high",
      "description": "Advanced 4-phase competitive analysis system with semantic similarity search, tone clustering, and strategic insights generation. Includes vector embeddings for smart competitor discovery.",
      "components": [
        "AssetAnalysis/competitive-analysis.ts"
      ],
      "apis": [
        "OpenAI embeddings (vector similarity)",
        "Claude AI for analysis",
        "Competitor profile scraping"
      ],
      "database_tables": [
        "competitor_candidates",
        "competitor_profiles",
        "competitor_scorecards",
        "strategic_insights",
        "message_saturation",
        "content_whitespace",
        "competitive_analysis_runs",
        "v_latest_competitive_landscape",
        "v_active_high_priority_insights",
        "v_competitors_with_scores"
      ],
      "lineOfCode": 466,
      "phases": [
        {
          "number": 1,
          "name": "Detection & Validation",
          "table": "competitor_candidates",
          "metrics": ["Validation Score", "Industry Match", "Offer Overlap", "Audience Overlap", "Geographic Match", "Archetype Alignment"]
        },
        {
          "number": 2,
          "name": "Competitor Profiling",
          "table": "competitor_profiles",
          "metrics": ["Mission Statement", "Tone & Archetype", "Content Themes", "Proof Patterns", "Audience Mentions", "Differentiation Language", "Vector Embedding"]
        },
        {
          "number": 3,
          "name": "Scoring & Comparison",
          "table": "competitor_scorecards",
          "metrics": ["Clarity", "Differentiation", "Emotion/Archetype", "Proof Strength", "SEO/Content Breadth", "Engagement Readiness"]
        },
        {
          "number": 4,
          "name": "Strategic Insights",
          "table": "strategic_insights",
          "insights": ["Differentiation Gaps", "Tone Clustering", "Proof Optimization", "Content Whitespace", "Message Saturation"]
        }
      ]
    },
    {
      "id": "content-calendar-generation",
      "name": "Content Calendar Generator",
      "status": "complete",
      "version": "1.0.0",
      "priority": "high",
      "description": "AI-powered content calendar with 20+ platform-specific ideas aligned with brand goals, messaging pillars, and archetype transformation. Supports LinkedIn, Instagram, Twitter, Blog, Email, and TikTok.",
      "components": [
        "ContentCalendar.tsx",
        "ContentCalendar/ContentCalendar.tsx"
      ],
      "apis": [
        "OpenRouter (Claude for idea generation)",
        "SocialPilot API (future)"
      ],
      "database_tables": [
        "content_calendar_ideas",
        "content_calendar_drafts"
      ],
      "lineOfCode": 540,
      "platforms": [
        {
          "name": "LinkedIn",
          "contentTypes": ["Article", "Post", "Carousel"],
          "characteristics": "Professional, thought leadership focused"
        },
        {
          "name": "Instagram",
          "contentTypes": ["Post", "Story", "Reel"],
          "characteristics": "Visual, engaging, community-driven"
        },
        {
          "name": "Twitter",
          "contentTypes": ["Thread", "Poll", "Tweet"],
          "characteristics": "Conversational, timely, trending"
        },
        {
          "name": "Blog",
          "contentTypes": ["Article", "Case Study", "Guide"],
          "characteristics": "SEO-optimized, evergreen content"
        },
        {
          "name": "Email",
          "contentTypes": ["Campaign", "Newsletter"],
          "characteristics": "Personalized, conversion-focused"
        },
        {
          "name": "TikTok",
          "contentTypes": ["Video Script", "Trend Participation"],
          "characteristics": "Short-form, entertaining, viral potential"
        }
      ],
      "features": [
        "AI-powered idea generation (20+ per calendar)",
        "Platform-specific content strategies",
        "Messaging pillar alignment",
        "Archetype-driven voice consistency",
        "Status tracking (idea ‚Üí published)",
        "Estimated reach & engagement goals",
        "Filtering by platform and pillar",
        "Calendar and list views",
        "Export to SocialPilot"
      ]
    },
    {
      "id": "content-generator",
      "name": "AI Content Generator with Brand Alignment Scoring",
      "status": "complete",
      "version": "1.0.0",
      "priority": "high",
      "description": "Intelligent content generation with real-time brand alignment and tone matching. Creates multiple draft versions with platform-specific formatting, hashtag generation, and CTAs.",
      "components": [
        "ContentGeneration/ContentGenerator.tsx"
      ],
      "apis": [
        "OpenRouter (Claude Sonnet for generation)",
        "Brand alignment scoring API"
      ],
      "database_tables": [
        "content_drafts",
        "content_revisions"
      ],
      "lineOfCode": 665,
      "capabilities": [
        "AI-powered draft generation",
        "Multiple version creation",
        "Brand alignment scoring (0-100%)",
        "Tone match scoring (0-100%)",
        "Archetype voice alignment",
        "Platform character limits",
        "Inline content editing",
        "Hashtag generation",
        "CTA suggestions",
        "Copy to clipboard",
        "Approve/reject workflow",
        "Tone profile integration",
        "Brand goal awareness",
        "Archetype transformation context"
      ]
    },
    {
      "id": "unified-onboarding",
      "name": "Unified Onboarding Flow (Legacy - Being Replaced)",
      "status": "deprecated",
      "version": "1.0.0",
      "priority": "low",
      "description": "Original onboarding experience. Being replaced by v3.0 two-phase system.",
      "components": [
        "UnifiedOnboarding/UnifiedOnboarding.tsx"
      ],
      "apis": [
        "Session management API",
        "State persistence API"
      ],
      "database_tables": [
        "user_sessions",
        "onboarding_progress"
      ],
      "lineOfCode": 450
    },
    {
      "id": "onboarding-v3-rebuild",
      "name": "Onboarding System V3.0 - Complete Rebuild",
      "status": "in_progress",
      "version": "3.0.0",
      "priority": "critical",
      "description": "Complete rebuild of onboarding experience with two-phase flow (Instant Reveal + Deep Discovery), industry intelligence, Marba coaching engine, and learning system. Target: 5-minute setup with immediate value delivery.",
      "components": [
        "onboarding/OnboardingOrchestrator.tsx",
        "onboarding/InstantReveal.tsx",
        "onboarding/WebsiteInput.tsx",
        "onboarding/AnalyzingAnimation.tsx",
        "onboarding/InstantRevealResults.tsx",
        "onboarding/UnifiedOnboardingV3.tsx",
        "onboarding/ThreeQuestionsStep.tsx",
        "onboarding/PersonalityStep.tsx",
        "coaching/CoachingOverlay.tsx",
        "coaching/AnswerAnalyzer.ts",
        "services/website-analyzer.service.ts",
        "services/marba-conversation.service.ts",
        "services/learning-engine.ts",
        "services/pattern-recognition.ts",
        "data/industries/index.ts",
        "data/industries/bakery-profile.ts",
        "data/industries/restaurant-profile.ts",
        "data/questions/industry-questions.ts",
        "types/onboarding.types.ts",
        "types/industry-profile.ts"
      ],
      "apis": [
        "Supabase Edge Function (analyze-website)",
        "OpenAI GPT-4 Turbo (content generation)",
        "Claude Sonnet (conversational AI)",
        "OpenRouter API",
        "Industry detection API",
        "Coaching analysis API",
        "Learning engine API"
      ],
      "database_tables": [
        "brands",
        "onboarding_sessions",
        "industry_profiles",
        "learning_events",
        "coaching_events",
        "phase1_data",
        "phase2_data"
      ],
      "estimatedLOC": 8500,
      "phases": [
        {
          "number": 1,
          "name": "Instant Reveal (Quick Start)",
          "duration": "2-3 minutes",
          "steps": [
            "Single URL input",
            "Server-side website scraping (no CORS)",
            "Industry detection with AI",
            "Brand asset extraction (logo, colors, tagline)",
            "Service/offering identification",
            "Instant visual reveal with initial content"
          ],
          "components": [
            "InstantReveal.tsx",
            "WebsiteInput.tsx",
            "AnalyzingAnimation.tsx",
            "InstantRevealResults.tsx"
          ],
          "deliverables": [
            "Business name",
            "Industry classification",
            "Brand colors",
            "Logo (if found)",
            "Initial tagline",
            "Services list",
            "Welcome message"
          ]
        },
        {
          "number": 2,
          "name": "Deep Discovery (Unified Onboarding)",
          "duration": "5-7 minutes",
          "steps": [
            "Welcome with Phase 1 data",
            "Marba 3-question conversation",
            "Real-time coaching on answers",
            "Personality/archetype selection",
            "Lead magnet setup",
            "Content preferences",
            "First content generation"
          ],
          "components": [
            "UnifiedOnboardingV3.tsx",
            "ThreeQuestionsStep.tsx",
            "PersonalityStep.tsx",
            "CoachingOverlay.tsx",
            "MarbaConversation.tsx"
          ],
          "deliverables": [
            "Complete brand mirror",
            "3 core business answers",
            "Selected personality",
            "Lead magnet strategy",
            "First 3 content pieces",
            "Brand transformation goals"
          ]
        }
      ],
      "industryIntelligence": {
        "profiles": 20,
        "industries": [
          "bakery",
          "restaurant",
          "cafe",
          "food-truck",
          "consultant",
          "accountant",
          "lawyer",
          "real-estate",
          "dentist",
          "chiropractor",
          "therapist",
          "personal-trainer",
          "boutique",
          "online-store",
          "handmade",
          "plumber",
          "electrician",
          "landscaper",
          "cleaner",
          "gym"
        ],
        "profileData": [
          "Typical customers (B2C/B2B)",
          "Content that works (topics, formats, hooks)",
          "Marketing channels (primary/secondary)",
          "Seasonality (peak months, key dates)",
          "Compliance (disclosures, prohibited claims)",
          "KPIs and benchmarks"
        ]
      },
      "coachingSystem": {
        "triggers": [
          "Generic/vague answers",
          "Missing industry value props",
          "Too broad target customer",
          "Weak differentiation",
          "No specificity"
        ],
        "coachingTypes": [
          "Specificity coaching",
          "Industry best practice guidance",
          "Value proposition sharpening",
          "Target customer refinement",
          "Proof/credibility enhancement"
        ],
        "userExperience": [
          "Real-time overlay after answer",
          "3-5 specific suggestions",
          "Industry examples",
          "Accept/skip options",
          "Progress tracking"
        ]
      },
      "learningEngine": {
        "loops": [
          {
            "name": "Content Performance Learning",
            "tracks": "Which generated content gets highest engagement",
            "improves": "Content generation prompts and templates"
          },
          {
            "name": "Coaching Effectiveness",
            "tracks": "Coaching acceptance rate by industry",
            "improves": "Coaching suggestions and triggers"
          },
          {
            "name": "Industry Intelligence",
            "tracks": "What works per industry from user behavior",
            "improves": "Industry profiles and recommendations"
          },
          {
            "name": "User Behavior",
            "tracks": "Drop-off points, skip patterns, time on steps",
            "improves": "Onboarding flow optimization"
          },
          {
            "name": "CTA Optimization",
            "tracks": "Which CTAs convert best per industry",
            "improves": "CTA generation in content"
          },
          {
            "name": "Timing Optimization",
            "tracks": "Optimal posting times per industry",
            "improves": "Content calendar scheduling"
          }
        ]
      },
      "criticalRequirements": [
        "NO CORS ISSUES - All website analysis server-side via Supabase Edge Function",
        "UI THEME - Dark blue (#1e3a8a) with NO GRADIENTS",
        "CONTINUE BUTTON - Must always be visible, never hidden",
        "SESSION PERSISTENCE - Auto-save every 30 seconds to localStorage + database",
        "PHASE INTEGRATION - Phase 1 data must flow seamlessly to Phase 2",
        "INDUSTRY INTELLIGENCE - Every question/suggestion must be industry-aware",
        "COACHING - Real-time feedback on all user inputs with accept/skip",
        "LEARNING - Track every interaction for continuous improvement"
      ],
      "successMetrics": {
        "websiteAnalysis": "<5 seconds",
        "timeToFirstContent": "<5 minutes total",
        "industryDetectionAccuracy": ">85%",
        "coachingAcceptanceRate": ">60%",
        "sessionRecoveryRate": "100%",
        "userCompletionRate": ">70%",
        "phase1ToPhase2Conversion": ">90%"
      },
      "gamificationEnhancements": [
        "Progress bar with filling animation",
        "Brand Strength Score (increases as they answer)",
        "Celebration confetti on completion",
        "Better loading copy ('Reading between your lines...', 'Discovering hidden personality...')",
        "Comparison views ('Your Brand Today' vs 'Your Brand Tomorrow')",
        "Visual personality selection (Instagram grid examples)",
        "Competitor comparison showcase"
      ],
      "implementationPriorities": {
        "week1": [
          "Set up Supabase Edge Function for website analysis",
          "Implement Phase 1 (Instant Reveal) UI",
          "Create session management system",
          "Build Phase 1 to Phase 2 integration"
        ],
        "week2": [
          "Implement Marba conversational engine",
          "Add coaching overlay system",
          "Create industry-specific questions (5 industries)",
          "Build answer quality analyzer"
        ],
        "week3": [
          "Complete 20 industry profiles",
          "Implement basic learning loops (2-3)",
          "Add pattern recognition",
          "Create content generator with industry context"
        ],
        "week4": [
          "Add gamification features",
          "Implement error handling",
          "Test all integration points",
          "Performance optimization",
          "Deploy to staging"
        ]
      }
    },
    {
      "id": "onboarding-gamification",
      "name": "Onboarding Gamification System",
      "status": "complete",
      "version": "1.0.0",
      "priority": "high",
      "description": "Complete gamification system with Brand Strength Score, animated progress bars, confetti celebrations, and achievement tracking. Increases onboarding completion rates through visual feedback and motivational elements.",
      "components": [
        "onboarding-v3/gamification/BrandStrengthScore.tsx",
        "onboarding-v3/gamification/AnimatedProgressBar.tsx",
        "onboarding-v3/gamification/CelebrationConfetti.tsx",
        "onboarding-v3/gamification/index.ts"
      ],
      "hooks": [
        "hooks/useGamification.ts"
      ],
      "dependencies": [
        "canvas-confetti@^1.9.3",
        "framer-motion@^11.15.0",
        "@types/canvas-confetti@^1.6.4"
      ],
      "apis": [],
      "database_tables": [],
      "lineOfCode": 970,
      "integrations": [
        "InstantRevealOrchestrator.tsx - Phase 1 progress tracking",
        "UnifiedOnboardingV3.tsx - Phase 2 progress tracking with quality scoring"
      ],
      "features": [
        "Brand Strength Score (0-100) with animated circular progress",
        "Animated progress bar with milestone markers",
        "5 types of confetti celebrations (basic, burst, stars, fireworks, epic)",
        "Quality-based scoring system (answers rated 0-100)",
        "Achievement system with 6 default achievements",
        "LocalStorage persistence for gamification state",
        "Real-time score updates with floating +X animations",
        "Color-coded score indicators (red/amber/blue/emerald)",
        "Milestone celebrations at 25%, 50%, 75%, 100%",
        "Motivational messages based on progress"
      ],
      "celebrations": [
        {
          "trigger": "Step completed",
          "type": "basic",
          "description": "100 particle confetti burst"
        },
        {
          "trigger": "High quality answer (90+)",
          "type": "stars",
          "description": "Golden star shower"
        },
        {
          "trigger": "All questions completed",
          "type": "burst",
          "description": "Multi-directional explosion (200 particles)"
        },
        {
          "trigger": "Personality selected",
          "type": "stars",
          "description": "Star celebration"
        },
        {
          "trigger": "Phase complete",
          "type": "epic",
          "description": "Combination celebration (burst + stars + side cannons)"
        }
      ],
      "scoring": {
        "phase1": {
          "initialScore": 10,
          "steps": 4,
          "pointsPerStep": "10-15 (auto, high quality)"
        },
        "phase2": {
          "initialScore": 50,
          "steps": 6,
          "basePoints": 5,
          "qualityBonus": "0-5 (based on answer quality 0-100)",
          "perfectBonus": 5
        }
      },
      "achievements": [
        {
          "id": "first_step",
          "title": "Getting Started",
          "icon": "üéØ",
          "trigger": "Complete first step"
        },
        {
          "id": "quality_answer",
          "title": "Quality Content",
          "icon": "‚≠ê",
          "trigger": "Answer with 80+ quality score"
        },
        {
          "id": "halfway",
          "title": "Halfway There",
          "icon": "üé™",
          "trigger": "50% completion"
        },
        {
          "id": "personality_selected",
          "title": "Brand Personality",
          "icon": "üé≠",
          "trigger": "Personality selected"
        },
        {
          "id": "perfect_answers",
          "title": "Perfectionist",
          "icon": "üíé",
          "trigger": "All answers 90+"
        },
        {
          "id": "onboarding_complete",
          "title": "Brand Master",
          "icon": "üèÜ",
          "trigger": "Complete onboarding"
        }
      ]
    },
    {
      "id": "brand-types-system",
      "name": "Comprehensive Type System",
      "status": "complete",
      "version": "2.0.0",
      "priority": "high",
      "description": "Complete TypeScript type definitions covering all brand analysis data structures, interactions, and state management. Ensures type safety across the entire application.",
      "components": [
        "types/BrandMirror.ts"
      ],
      "apis": [],
      "database_tables": [],
      "lineOfCode": 2238,
      "typeDefinitions": [
        "GoldenCircle (with Why/How/What sections)",
        "ArchetypeScore (12 archetypes)",
        "ToneCalibration (5-dimensional)",
        "IndustryProfile",
        "AudienceInsights",
        "CompetitorProfile & CompetitorScorecard",
        "StrategyInsight",
        "MessagingPositioning",
        "BrandHealth",
        "VisualAssets (colors, typography, logos)",
        "CompleteBrandAnalysis (aggregated)",
        "BrandTransformationGoal",
        "ArchetypeTransformation",
        "ReflectionState"
      ]
    },
    {
      "id": "admin-dashboard",
      "name": "Admin Dashboard & Management",
      "status": "complete",
      "version": "1.0.0",
      "priority": "medium",
      "description": "Comprehensive admin interface for managing users, organizations, brands, and system diagnostics. Includes role-based access control and system health monitoring.",
      "components": [
        "AdminDashboard.tsx",
        "AdminNavigation.tsx",
        "AdminRoleFixer.tsx",
        "AdminSystemInfo.tsx",
        "AdminUserSelector.tsx",
        "AdminWelcome.tsx",
        "GlobalAdminOrganizations.tsx",
        "GlobalAdminSettings.tsx",
        "UserManagement.tsx"
      ],
      "apis": [
        "User management API",
        "Organization API",
        "System diagnostics API"
      ],
      "database_tables": [
        "users",
        "organizations",
        "brands",
        "user_roles"
      ],
      "lineOfCode": 2500,
      "features": [
        "User management and role assignment",
        "Organization hierarchy",
        "Brand management",
        "System diagnostics",
        "Connection status monitoring",
        "Admin role fixing",
        "User selector and profiling"
      ]
    },
    {
      "id": "design-system",
      "name": "Modern Design System & UI Components",
      "status": "complete",
      "version": "1.0.0",
      "priority": "high",
      "description": "Complete shadcn/ui component library with custom Tailwind CSS styling. Implements modern SaaS aesthetic with gradient system, consistent spacing, and smooth animations.",
      "components": [
        "ui/ (40+ components)",
        "ui/accordion.tsx",
        "ui/alert-dialog.tsx",
        "ui/badge.tsx",
        "ui/button.tsx",
        "ui/card.tsx",
        "ui/dialog.tsx",
        "ui/dropdown-menu.tsx",
        "ui/input.tsx",
        "ui/label.tsx",
        "ui/popover.tsx",
        "ui/select.tsx",
        "ui/tabs.tsx",
        "ui/tooltip.tsx",
        "ui/chart.tsx",
        "ui/sidebar.tsx"
      ],
      "apis": [],
      "database_tables": [],
      "lineOfCode": 4200,
      "features": [
        "45+ UI components",
        "Gradient system (Primary, Secondary, Success, Sunset)",
        "Consistent spacing (4px grid)",
        "Elevation system with shadows",
        "Smooth transitions and animations",
        "Dark mode support",
        "Accessibility compliance",
        "Mobile-responsive design",
        "Icon integration (Lucide React)",
        "Form components with validation"
      ],
      "colorPalette": {
        "primary": "linear-gradient(135deg, #667eea 0%, #764ba2 100%)",
        "secondary": "linear-gradient(to right, #f093fb 0%, #f5576c 100%)",
        "success": "linear-gradient(135deg, #667eea 0%, #764ba2 100%)",
        "sunset": "linear-gradient(135deg, #fa709a 0%, #fee140 100%)"
      }
    },
    {
      "id": "flow-builder",
      "name": "Visual Flow Builder",
      "status": "in_progress",
      "version": "1.0.0",
      "priority": "medium",
      "description": "Drag-and-drop flow builder for creating custom brand journeys and onboarding flows. Uses ReactFlow for node-based visual programming.",
      "components": [
        "FlowBuilder/FlowBuilder.tsx",
        "FlowBuilder/FlowCanvas.tsx",
        "FlowBuilder/NodePalette.tsx",
        "FlowBuilder/PropertiesPanel.tsx",
        "FlowBuilder/QuestionLibrary.tsx",
        "FlowBuilder/nodes/ (7 node types)"
      ],
      "apis": [
        "Flow persistence API"
      ],
      "database_tables": [
        "flows",
        "flow_nodes",
        "flow_connections"
      ],
      "lineOfCode": 1800,
      "nodeTypes": [
        "Start Node",
        "End Node",
        "Message Node",
        "Question Node",
        "AI Node",
        "Condition Node",
        "Brand Data Node",
        "Button Node"
      ]
    },
    {
      "id": "seo-optimization",
      "name": "SEO & Landing Page Optimization",
      "status": "in_progress",
      "version": "1.0.0",
      "priority": "medium",
      "description": "SEO analysis and landing page optimization tools for improving search visibility and conversion. Includes keyword ranking, content optimization, and performance metrics.",
      "components": [
        "seo/SEODashboard.tsx",
        "seo/LandingPageCreator.tsx",
        "seo/LandingPageOptimizer.tsx",
        "seo/KeywordRanking.tsx",
        "seo/SEOInsights.tsx",
        "seo/SEONavigation.tsx"
      ],
      "apis": [
        "SEO analysis API",
        "Keyword research API",
        "Ranking tracking API"
      ],
      "database_tables": [
        "seo_keywords",
        "seo_rankings",
        "landing_pages"
      ],
      "lineOfCode": 1200,
      "features": [
        "Keyword research and ranking",
        "Landing page creation",
        "Content optimization suggestions",
        "Performance metrics",
        "Competitor SEO analysis",
        "On-page SEO scoring"
      ]
    },
    {
      "id": "analytics-engagement",
      "name": "Analytics & Engagement Tracking",
      "status": "complete",
      "version": "1.0.0",
      "priority": "medium",
      "description": "Real-time analytics and engagement metrics for content performance, brand health tracking, and audience insights.",
      "components": [
        "Analytics.tsx",
        "EngagementAnalytics.tsx",
        "EngagementDashboard.tsx"
      ],
      "apis": [
        "Analytics API",
        "Engagement tracking API"
      ],
      "database_tables": [
        "analytics_events",
        "engagement_metrics",
        "content_performance"
      ],
      "lineOfCode": 850,
      "metrics": [
        "Page views and sessions",
        "Engagement rate",
        "Content performance",
        "Audience demographics",
        "Conversion tracking",
        "Brand health over time"
      ]
    },
    {
      "id": "brand-validation",
      "name": "Brand Validation & Health Scoring",
      "status": "complete",
      "version": "1.0.0",
      "priority": "high",
      "description": "Comprehensive brand health assessment with multi-dimensional scoring. Tracks brand consistency, clarity, differentiation, and market positioning.",
      "components": [
        "AssetAnalysis/helpers.ts"
      ],
      "apis": [
        "Claude AI for assessment"
      ],
      "database_tables": [
        "brand_health_checkpoints",
        "brand_scores"
      ],
      "lineOfCode": 382,
      "dimensions": [
        "Clarity (0-100)",
        "Differentiation (0-100)",
        "Consistency (0-100)",
        "Emotion (0-100)",
        "Proof (0-100)",
        "Authority (0-100)"
      ]
    }
  ],
  "planned_features": [
    {
      "id": "quick-win-generator",
      "name": "Phase 3: Quick Win Generator (Instant Value)",
      "priority": "critical",
      "estimatedCompletion": "Q1 2025",
      "description": "Final onboarding phase delivering ready-to-publish content in <3 minutes. Users get tangible, usable content they can immediately post, creating the 'wow I can use this now' moment.",
      "components": [
        "onboarding-v3/QuickWinSelector.tsx",
        "onboarding-v3/QuickWinGeneration.tsx",
        "onboarding-v3/QuickWinResult.tsx",
        "onboarding-v3/QuickWinComponents.tsx",
        "services/quickWinGenerator.ts"
      ],
      "apis": [
        "OpenRouter (industry-calibrated prompts)",
        "Claude 3.5 Sonnet (creative content)",
        "GPT-4 Turbo (technical content)"
      ],
      "database_tables": [
        "quick_wins",
        "quick_win_templates",
        "quick_win_usage"
      ],
      "estimatedLOC": 1800,
      "contentTypes": [
        {
          "id": "social-posts",
          "title": "This Week's Social Posts",
          "description": "5 ready-to-post updates",
          "deliverables": ["Platform-optimized", "Hashtags", "CTAs", "Multiple variants"]
        },
        {
          "id": "bio-update",
          "title": "Compelling Bio Update",
          "description": "Professional bio",
          "deliverables": ["3 lengths (50/150/300 words)", "SEO optimized", "Personality-aligned"]
        },
        {
          "id": "email-series",
          "title": "Welcome Email Sequence",
          "description": "3-email nurture series",
          "deliverables": ["Subject lines", "Nurture sequence", "CTAs", "Personalization"]
        },
        {
          "id": "content-calendar",
          "title": "30-Day Content Calendar",
          "description": "Month of content ideas",
          "deliverables": ["Daily schedule", "Content mix", "Seasonal alignment", "Platform rec's"]
        }
      ],
      "industryQuickWins": {
        "restaurant": "Tonight's Specials Post",
        "electrician": "Emergency Service Ad",
        "consultant": "Lead Magnet Landing Page",
        "bakery": "Seasonal Campaign",
        "dentist": "New Patient Welcome Kit",
        "lawyer": "Free Consultation Offer",
        "gym": "Transformation Challenge"
      },
      "userFlow": [
        {
          "step": 1,
          "name": "Quick Win Selection",
          "duration": "30s",
          "component": "QuickWinSelector.tsx",
          "actions": ["Show 4 options + industry-specific", "Highlight recommended", "Skip option"]
        },
        {
          "step": 2,
          "name": "Instant Generation",
          "duration": "30-45s",
          "component": "QuickWinGeneration.tsx",
          "actions": ["5-step progress", "Industry-calibrated prompts", "+15 points"],
          "steps": ["Analyzing voice", "Research best practices", "Crafting message", "Optimizing", "Final polish"]
        },
        {
          "step": 3,
          "name": "Result Display",
          "duration": "1-2min",
          "component": "QuickWinResult.tsx",
          "actions": ["Preview content", "Copy/Share/Edit", "Direct publish", "Upsell", "Create another"]
        }
      ],
      "generationLogic": {
        "promptStructure": ["Industry + personality + emotional level", "Voice from transformation", "Platform formatting + hashtags + CTAs"],
        "llmSelection": {
          "creative": "Claude 3.5 Sonnet (temp 0.7)",
          "professional": "GPT-4 Turbo (temp 0.6)",
          "technical": "GPT-4 Turbo (temp 0.5)"
        },
        "variants": "2-3 versions per request"
      },
      "successMetrics": {
        "timeToFirstContent": "<3 minutes",
        "selectionToGeneration": "<60 seconds",
        "copyUseRate": ">70%",
        "continueToDashboard": ">85%",
        "returnForSecond": ">40%"
      },
      "gamification": {
        "points": {
          "firstQuickWin": 15,
          "copyContent": 5,
          "shareContent": 10
        },
        "achievements": ["First Victory üèÜ", "Content Machine ‚ö°"],
        "celebrations": ["Copy = burst confetti", "Complete = epic confetti"]
      }
    },
    {
      "id": "industry-calibration-system",
      "name": "Industry-Specific Prompting & Auto-Calibration",
      "priority": "critical",
      "estimatedCompletion": "Q1 2025",
      "description": "Automatic industry calibration system that detects industries, calibrates emotional levels, and provides industry-specific content transformation with smart LLM routing.",
      "components": [
        "services/industry-auto-calibration.service.ts",
        "services/industry-profile-generator.ts",
        "services/industry-transformation.service.ts",
        "components/admin/IndustryProfileEditor.tsx",
        "components/onboarding-v3/TransformationComparison.tsx"
      ],
      "apis": [
        "/api/industry/calibrate",
        "/api/industry/transform",
        "OpenRouter (multi-model routing)",
        "Claude 3.5 Sonnet (creative industries)",
        "GPT-4 Turbo (technical industries)"
      ],
      "database_tables": [
        "industry_profiles",
        "industry_calibration_history",
        "transformation_results"
      ],
      "estimatedLOC": 2500,
      "features": [
        "Auto-detect and calibrate new industries in <30 seconds",
        "Emotional level calibration (0-1 scale)",
        "Formality, urgency, technical level controls",
        "Transformation approach (emotional/functional/balanced)",
        "Primary value drivers identification",
        "Avoidance pattern detection",
        "Smart LLM routing per industry",
        "Manual calibration override UI",
        "Real-time transformation testing",
        "Industry-specific coaching explanations",
        "Calibration history tracking",
        "Performance metrics and learning"
      ],
      "calibrationSettings": {
        "emotionalLevel": {
          "range": "0-1",
          "examples": {
            "emergency": "0.2-0.3 (competence focused)",
            "professional": "0.4-0.5 (balanced)",
            "creative": "0.7-0.9 (high emotion)"
          }
        },
        "transformationApproaches": ["emotional", "functional", "balanced"],
        "valueDrivers": "Top 3-5 customer priorities per industry"
      },
      "llmRouting": {
        "technical": "OpenAI GPT-4 Turbo (temp: 0.3)",
        "professional": "Claude 3.5 Sonnet (temp: 0.5)",
        "creative": "Claude 3.5 Sonnet (temp: 0.7-0.8)",
        "default": "GPT-4 Turbo (temp: 0.5)"
      },
      "successMetrics": {
        "calibrationTime": "<30 seconds",
        "calibrationAccuracy": ">85%",
        "transformationQuality": "+40% improvement",
        "manualAdjustmentRate": "<20%"
      }
    },
    {
      "id": "socialpilot-integration",
      "name": "SocialPilot Integration",
      "priority": "high",
      "estimatedCompletion": "Q4 2024",
      "description": "Direct integration with SocialPilot for content scheduling and cross-posting to multiple platforms."
    },
    {
      "id": "team-collaboration",
      "name": "Team Collaboration Features",
      "priority": "high",
      "estimatedCompletion": "Q1 2025",
      "description": "Multi-user editing, commenting, approval workflows, and team management features."
    },
    {
      "id": "advanced-ai-models",
      "name": "Advanced AI Models (GPT-4o)",
      "priority": "medium",
      "estimatedCompletion": "Q1 2025",
      "description": "Upgrade to more powerful AI models for better analysis and content generation."
    },
    {
      "id": "mobile-app",
      "name": "Mobile App (React Native)",
      "priority": "medium",
      "estimatedCompletion": "Q2 2025",
      "description": "iOS and Android native mobile applications for on-the-go brand management."
    },
    {
      "id": "multi-brand-management",
      "name": "Multi-Brand Management",
      "priority": "medium",
      "estimatedCompletion": "Q2 2025",
      "description": "Support for managing multiple brands within a single account with unified dashboard."
    },
    {
      "id": "white-label-solution",
      "name": "White-Label Solution",
      "priority": "medium",
      "estimatedCompletion": "Q2 2025",
      "description": "Customizable branding and deployment for agencies and consultants."
    },
    {
      "id": "api-integration",
      "name": "Public API for Third-Party Integration",
      "priority": "medium",
      "estimatedCompletion": "Q2 2025",
      "description": "REST and GraphQL APIs for third-party integrations and custom workflows."
    },
    {
      "id": "custom-archetypes",
      "name": "Custom Archetype Creation",
      "priority": "low",
      "estimatedCompletion": "Q3 2025",
      "description": "Allow users to create and define custom brand archetypes beyond the default 12."
    },
    {
      "id": "advanced-analytics",
      "name": "Advanced Analytics Dashboard",
      "priority": "medium",
      "estimatedCompletion": "Q1 2025",
      "description": "A/B testing, advanced metrics, predictive analytics, and audience insights."
    },
    {
      "id": "marketplace",
      "name": "Content Marketplace",
      "priority": "low",
      "estimatedCompletion": "Q3 2025",
      "description": "Marketplace for pre-designed templates, frameworks, and professional content."
    }
  ],
  "metrics": {
    "totalLines": {
      "typescript": 99495,
      "components": 7631,
      "typeDefinitions": 2238,
      "utilities": 1500,
      "database": 525,
      "total": 99495
    },
    "fileCount": {
      "components": 193,
      "utilities": 24,
      "typeDefinitions": 8,
      "migrations": 2,
      "tests": 2,
      "total": 250
    },
    "components": {
      "feature_components": 45,
      "ui_components": 45,
      "admin_components": 12,
      "utility_components": 35,
      "total": 137
    },
    "database": {
      "tables": 22,
      "views": 3,
      "functions": 4,
      "indexes": 35,
      "triggers": 8
    },
    "coverage": {
      "typeScriptCoverage": "92%",
      "apiCoverage": "85%",
      "testCoverage": "42%",
      "componentCoverage": "100%"
    }
  },
  "tech_stack": {
    "languages": ["TypeScript 5.9.3", "JavaScript", "SQL"],
    "frameworks": ["React 18.3.1", "Vite 6.3.5", "Tailwind CSS 4.1.16"],
    "infrastructure": ["Supabase", "PostgreSQL", "Supabase Auth", "Supabase Edge Functions", "Supabase Realtime", "Supabase Storage"],
    "tools": ["Git", "ESLint 9.38.0", "Vitest 2.1.8", "Husky", "Build Runner 3.0"],
    "ui_libraries": ["shadcn/ui (45+ components)", "Radix UI (25+ components)", "Lucide React", "Recharts", "ReactFlow", "Zustand"],
    "ai_integrations": ["Claude via OpenRouter", "OpenAI Embeddings (Ada-002)"]
  },
  "database_schema": {
    "core_tables": [
      {
        "name": "brand_goals",
        "purpose": "Stores brand transformation goals",
        "columns": ["id", "brand_id", "category", "priority", "current_state", "desired_state", "timeline", "milestones", "action_items", "approved"],
        "version": "1.0"
      },
      {
        "name": "goal_reflections",
        "purpose": "Tracks reflection sessions per Brand Mirror tab",
        "columns": ["id", "brand_id", "tab_name", "questions_answered", "teaching_viewed", "completed_at", "session_duration_seconds"],
        "version": "1.0"
      },
      {
        "name": "archetype_transformations",
        "purpose": "Specialized archetype transformation plans",
        "columns": ["id", "brand_id", "goal_id", "from_archetype", "to_archetype", "tone_shift", "language_guidance", "messaging_priority", "content_instructions"],
        "version": "1.0"
      }
    ],
    "competitive_intelligence": [
      {
        "name": "competitor_candidates",
        "purpose": "Phase 1 - Candidate competitors with validation",
        "columns": ["id", "brand_id", "name", "domain", "validation_score", "industry_match", "offer_overlap", "audience_overlap", "status"],
        "version": "1.0"
      },
      {
        "name": "competitor_profiles",
        "purpose": "Phase 2 - Complete competitor profiles with embeddings",
        "columns": ["id", "brand_id", "domain", "mission_statement", "archetype_primary", "tone_primary", "content_themes", "embedding", "created_at", "updated_at"],
        "version": "1.0"
      },
      {
        "name": "competitor_scorecards",
        "purpose": "Phase 3 - 6-dimension competitive scoring",
        "columns": ["id", "brand_id", "competitor_profile_id", "score_clarity", "score_differentiation", "score_emotion_archetype", "score_proof_strength", "score_seo_content_breadth", "score_engagement_readiness", "score_total"],
        "version": "1.0"
      },
      {
        "name": "strategic_insights",
        "purpose": "Phase 4 - Actionable strategic insights",
        "columns": ["id", "brand_id", "insight_type", "priority", "title", "description", "actionable", "status"],
        "version": "1.0"
      },
      {
        "name": "message_saturation",
        "purpose": "Tracks value proposition crowding",
        "columns": ["id", "brand_id", "value_prop", "saturation_score", "competitors", "recommendation"],
        "version": "1.0"
      },
      {
        "name": "content_whitespace",
        "purpose": "Identifies untapped content opportunities",
        "columns": ["id", "brand_id", "topic", "opportunity", "priority", "status"],
        "version": "1.0"
      },
      {
        "name": "competitive_analysis_runs",
        "purpose": "Meta tracking of analysis runs",
        "columns": ["id", "brand_id", "user_brand_score", "average_competitor_score", "user_ranking", "total_analyzed", "competitiveness_index", "next_refresh_due"],
        "version": "1.0"
      }
    ],
    "views": [
      {
        "name": "v_latest_competitive_landscape",
        "purpose": "Latest competitive analysis per brand"
      },
      {
        "name": "v_active_high_priority_insights",
        "purpose": "High-priority active insights"
      },
      {
        "name": "v_competitors_with_scores",
        "purpose": "Competitors with latest scorecard scores"
      }
    ],
    "functions": [
      {
        "name": "find_similar_competitors",
        "purpose": "Semantic similarity search for competitors using vector embeddings",
        "parameters": ["target_embedding", "target_brand_id", "match_threshold", "match_count"]
      },
      {
        "name": "get_competitive_summary",
        "purpose": "Aggregated competitive analysis summary",
        "parameters": ["p_brand_id"]
      },
      {
        "name": "update_updated_at_column",
        "purpose": "Trigger function to update updated_at timestamps"
      }
    ]
  },
  "architecture": {
    "patterns": [
      "Component-based architecture",
      "Atomic design principles",
      "Context API for state management",
      "Zustand for complex state",
      "Custom hooks for logic reuse",
      "Service layer for API calls",
      "Type-driven development"
    ],
    "layers": {
      "presentation": "React components with TypeScript",
      "state_management": "Zustand + React Context",
      "services": "Supabase client, OpenRouter API, utilities",
      "data_layer": "PostgreSQL with RLS policies",
      "ai_layer": "Claude AI via OpenRouter"
    }
  },
  "performance": {
    "bundle_size": {
      "main_bundle": "~450 KB (gzipped: ~120 KB)",
      "vendor_bundle": "~280 KB (gzipped: ~90 KB)",
      "total": "~730 KB (gzipped: ~210 KB)"
    },
    "optimization_techniques": [
      "Lazy loading of components",
      "Code splitting by route",
      "Memoization of expensive computations",
      "Debouncing of user input",
      "LocalStorage caching",
      "React Query for API caching",
      "Service Worker for offline support",
      "Image optimization"
    ]
  },
  "project_status": {
    "completion_level": "92%",
    "phase": 9,
    "total_phases": 11,
    "phase_description": "Phase 9: Complete unified onboarding flow with modern UI/UX",
    "recent_milestones": [
      {
        "date": "2025-11-01",
        "milestone": "V2.3 Release - Reflection & Goals System",
        "features": ["Brand goals system", "Reflection mode", "Archetype transformation", "Content calendar", "Content generator"],
        "status": "completed"
      },
      {
        "date": "2025-10-31",
        "milestone": "Competitive Intelligence Schema",
        "features": ["4-phase analysis", "Vector embeddings", "Strategic insights"],
        "status": "completed"
      },
      {
        "date": "2025-10-31",
        "milestone": "Visual Palette Data Fix",
        "features": ["Color extraction", "Fallback palettes"],
        "status": "completed"
      }
    ],
    "next_milestones": [
      {
        "date": "2025-11-15",
        "milestone": "Phase 10: Team Collaboration",
        "features": ["Multi-user editing", "Approval workflows", "Comments system"],
        "status": "planned"
      },
      {
        "date": "2025-12-01",
        "milestone": "Phase 11: SocialPilot Integration",
        "features": ["Content scheduling", "Multi-platform posting"],
        "status": "planned"
      }
    ]
  },
  "quality_metrics": {
    "type_safety": {
      "coverage": "92%",
      "strict_mode": true,
      "no_any_types": "95% enforced"
    },
    "code_organization": {
      "component_structure": "Atomic design",
      "naming_conventions": "Followed",
      "documentation": "Comprehensive"
    },
    "testing": {
      "unit_tests": "42 tests written",
      "test_coverage": "42%",
      "e2e_tests": "Planned"
    },
    "accessibility": {
      "wcag_compliance": "AA level",
      "keyboard_navigation": "Supported",
      "screen_reader": "Supported"
    }
  },
  "deployment": {
    "environments": [
      "Development (local)",
      "Staging (preview deployment)",
      "Production (live)"
    ],
    "platforms": [
      "Vercel",
      "Netlify",
      "Custom servers"
    ],
    "ci_cd": "GitHub Actions",
    "monitoring": "Sentry for error tracking"
  },
  "documentation": {
    "files": [
      "README.md - Project overview",
      "README_MARBA_V2.md - Comprehensive feature documentation",
      "FEATURE_BUILD_SUMMARY.md - Recent feature builds",
      "INTEGRATION_GUIDE.md - Integration instructions",
      "COMPETITIVE_ANALYSIS_DEPLOYMENT.md - Competitive intel docs",
      "CONTENT-GENERATION-SPEC.md - Content generation specification",
      "docs/ - Complete documentation site"
    ],
    "api_docs": "In docs/api/ folder",
    "component_library": "In docs/components/ folder",
    "database_schema": "In Figma/supabase/migrations/ folder"
  },
  "team_info": {
    "project_lead": "Byron Hudson",
    "build_status": "Active development",
    "last_update": "2025-11-02",
    "repository": "https://github.com/DockeryAI/marba",
    "documentation_site": "docs.marba.com"
  },
  "future_vision": {
    "phase_10_2025_q1": "Team collaboration, advanced analytics, multi-brand management",
    "phase_11_2025_q2": "White-label solution, public API, mobile app (React Native)",
    "phase_12_2025_q3": "Custom archetypes, content marketplace, advanced AI features"
  },
  "generated_with": "Comprehensive code analysis on 2025-11-02",
  "analysis_notes": {
    "thoroughness": "Very thorough - analyzed all major components, utilities, database schema, and features",
    "data_sources": [
      "package.json analysis",
      "Component file enumeration and LOC counting",
      "Database migration files",
      "Type definition analysis",
      "Feature documentation",
      "Git commit history"
    ],
    "key_findings": [
      "MARBA is a production-ready, mature product at 92% completion",
      "99,495 lines of TypeScript code across 250+ files",
      "Comprehensive feature set with 12 major features fully implemented",
      "Strong type safety and architecture patterns",
      "Database design supports 4-phase competitive intelligence analysis",
      "V2.3 release adds critical reflection and goal-setting capabilities",
      "Modern tech stack with React 18, TypeScript 5.9, Supabase, and Claude AI",
      "Well-documented with multiple guides and specifications"
    ]
  }
}
